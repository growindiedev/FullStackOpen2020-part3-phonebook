(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),u=t(4),l=t(2);var s=function(e){var n=e.props,t=n.addPerson,r=n.handleNameChange,o=n.handleNumberChange;return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:r})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:o})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))};var i=function(e){var n=e.props.handleSearch;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{onChange:n}))},m=t(3),d=t.n(m),f="/api/persons";var p=function(e){var n=e.props,t=n.persons,r=n.per,o=n.setPersons,c=n.setErrorMessage,u=n.setError;return a.a.createElement("div",null,r.name,r.number," ",a.a.createElement("button",{onClick:function(){var e;window.confirm("Delete ".concat(r.name,"?"))&&(e=r.id,d.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))).then((function(e){var n=t.filter((function(e){return e.id!==r.id}));u(!1),c("Deleted ".concat(r.name)),setTimeout((function(){c(null)}),5e3),o(n)})).catch((function(e){c("Information of ".concat(r.name," has already been removed from the server")),u(!0),setTimeout((function(){c(null)}),5e3)}))}}," delete ")," ")};var h=function(e){var n=e.props,t=n.setPersons,r=n.persons,o=n.search,c=n.setErrorMessage,u=n.setError;return a.a.createElement("div",null,r.filter((function(e){return-1!==e.name.toLowerCase().indexOf(o.toLowerCase())})).map((function(e,n){return a.a.createElement(p,{key:n,props:{per:e,persons:r,setPersons:t,setErrorMessage:c,setError:u}})})))};var b=function(e){var n=e.message,t=e.error;return null===n?null:a.a.createElement("div",{className:t?"error":"alert"},n)},E=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),m=Object(l.a)(c,2),p=m[0],E=m[1],v=Object(r.useState)(""),g=Object(l.a)(v,2),O=g[0],j=g[1],w=Object(r.useState)([]),C=Object(l.a)(w,2),k=C[0],S=C[1],P=Object(r.useState)(null),y=Object(l.a)(P,2),N=y[0],M=y[1],T=Object(r.useState)(!1),D=Object(l.a)(T,2),x=D[0],I=D[1];Object(r.useEffect)((function(){console.log("effect"),d.a.get(f).then((function(e){return e.data})).then((function(e){console.log("promise fulfilled"),S(e)}))}),[]);return a.a.createElement("div",null,a.a.createElement(b,{message:N,error:x}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(i,{props:{handleSearch:function(e){j(e.target.value)}}}),a.a.createElement("h2",null,"add a new"),a.a.createElement(s,{props:{addPerson:function(e){e.preventDefault();var n,r=k.find((function(e){return e.name===t}));if(void 0===r){var a={name:t,number:p};(n=a,d.a.post(f,n).then((function(e){return e.data}))).then((function(e){return S(k.concat(e))})),o(""),I(!1),M("Added ".concat(a.name)),setTimeout((function(){M(null)}),5e3)}else if(r&&p){var c=Object(u.a)(Object(u.a)({},r),{},{number:p});window.confirm("".concat(t," is already added to phonebook, replace the old number with the new one?"))&&function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}(r.id,c).then((function(e){return S(k.map((function(e){return e.id!==r.id?e:c})))})),I(!1),M("updated ".concat(t," number")),setTimeout((function(){M(null)}),5e3)}else alert("".concat(t," is already in the phonebook"))},handleNameChange:function(e){o(e.target.value)},handleNumberChange:function(e){E(e.target.value)}}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(h,{props:{setPersons:S,persons:k,search:O,setErrorMessage:M,setError:I}}))};t(37);c.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1e394f23.chunk.js.map